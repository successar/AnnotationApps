(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{11:function(t,e,a){t.exports=a(17)},17:function(t,e,a){"use strict";a.r(e);var n=a(6),r=a(2),i=a.n(r),d=a(1),s=a(4),o=a(3);function c(){var t=i()("div[data-type=common]").data(),e=i()(this).data(),a=Object(o.a)(Object(o.a)({},t),e);delete a.type;var n=a.tablename;delete a.tablename;var r=i()(this).find("mark").map((function(){var t=function(t){var e={};return t.forEach((function(t){Object.entries(t).forEach((function(t,a){var n=Object(s.a)(t,2),r=n[0],i=n[1],d=r;e[d]||(e[d]=[]),e[d].push(i)}))})),e}(i()(this).find(".highlightable").map((function(){return i()(this).data()})).get());return t["span-start"]=i()(this).attr("data-span-start"),t["span-end"]=i()(this).attr("data-span-end"),delete t.block_pos,t["span-type"]=i()(this).attr("data-span-type"),t})).get();return{api:r.length>0?"add":"delete",tablename:n,keys:a,value:JSON.stringify(r)}}function l(t){var e=document.createElement("button");i()(e).on("click",h),e.classList.add("btn","btn-success","rel-button"),e.innerHTML=i()(t).attr("data-span-type"),t.appendChild(e)}function p(){var t,e=window.getSelection();if(e){var a=function(t){var e=t.startContainer,a=t.endContainer;if(e==a)return[e];var n=[];for(;e&&e!=a;)n.push(e=u(e));e=t.startContainer;for(;e&&e!=t.commonAncestorContainer;)n.unshift(e),e=e.parentNode;return n}(e.getRangeAt(0)),n=(t=(t=a).map((function(t){return t.nodeType===Node.TEXT_NODE&&(t=t.parentNode,t=(t=i()(t).closest(".highlightable"))?t.get(0):t),t&&t.classList.contains("highlightable")?[t]:[]})),Array.from(new Set(t.flat())));if(function(t){var e=t.map((function(t){return i()(t).closest("mark")}));(e=Array.from(new Set(e.flat()))).forEach((function(t){console.log(t),i()(t).find("button").remove(),console.log(i()(t).contents());var e=i()(t).contents();i()(t).replaceWith(e)}))}(n),n.length>0&&n.every((function(t){return t.parentNode===n[0].parentNode}))){var r=new Range;r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]);var s=document.createElement("mark"),o=n[0].parentNode,c=i()(o).children("div[data-type=type-selector]").attr("data-radio-id"),p=i()("input[name=".concat(c,"]:checked")).val();p=p||"UNK",i()(s).attr("data-span-type",p);var h=n.map((function(t){return parseInt(i()(t).attr("data-block_pos"))})),m=Math.min.apply(Math,Object(d.a)(h)),f=Math.max.apply(Math,Object(d.a)(h))+1;i()(s).attr("data-span-start",m),i()(s).attr("data-span-end",f),r.surroundContents(s),l(s)}e.removeAllRanges()}}function h(t){var e=i()(this).closest(".highlight").get(0);if(e){var a=i()(e).find("button.clicked").get(0);if(a){var n=i()(a).closest("mark").get(0),r=i()(n).attr("data-span-start"),d=i()(n).attr("data-span-end"),s=i()(this).closest("mark").get(0),o=i()(s).attr("data-span-start"),c=i()(s).attr("data-span-end"),l=i()(document.createElement("div"));l.addClass("relation"),l.attr("data-span-a-start",r),l.attr("data-span-a-end",d),l.attr("data-span-b-start",o),l.attr("data-span-b-end",c);var p=i()(document.createElement("span"));p.addClass("rel-mark"),p.html(i()(n).find(".highlightable").text());var h=i()(document.createElement("span"));h.addClass("rel-mark"),h.html(i()(s).find(".highlightable").text()),l.append(p),l.append(" - "),l.append(h),i()(e).find("div[data-type=relation-area]").append(l),i()(a).removeClass("clicked")}else i()(this).addClass("clicked"),i()(this).blur()}t.stopPropagation()}function u(t){if(t.hasChildNodes())return t.firstChild;for(;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null}function m(){var t=i()("div[data-type=common]").data(),e=i()(this).data(),a=Object(o.a)(Object(o.a)({},t),e);delete a.type;var n=a.tablename;return delete a.tablename,{api:i()(this).find(":selected").val()?"add":"delete",tablename:n,keys:a,value:i()(this).find(":selected").val()}}function f(){var t=i()("div[data-type=common]").data(),e=i()(this).data(),a=Object(o.a)(Object(o.a)({},t),e);delete a.type;var n=a.tablename;return delete a.tablename,{api:i()(this).prop("checked")?"add":"delete",tablename:n,keys:a,value:1}}var v="idle";function g(){i()(".highlight").on("mouseup",p),i()(".highlight").find("mark").each((function(t,e){return l(e)}))}function b(){var t=[];return t=(t=(t=t.concat(i()("input[type=checkbox].db").map(f).get())).concat(i()(".highlight").map(c).get())).concat(i()("select.db").map(m).get())}n.a.events.addEventListener(n.a.RENDER_EVENT,(function(t){var e=t.detail;if("clicked"==v)return v="idle",void i()("#docdiv").html("");i()("#docdiv").html(e.args.data),i()("#head-style").append(e.args.css),g(),i()("#savenext").on("click",(function(){var t=b();n.a.setComponentValue({done:!0,next:!0,values:t}),v="clicked"})),i()("#save").on("click",(function(){var t=b();n.a.setComponentValue({done:!0,next:!1,values:t}),v="clicked"})),n.a.setFrameHeight()})),n.a.setComponentReady(),n.a.setFrameHeight()}},[[11,1,2]]]);
//# sourceMappingURL=main.200ac660.chunk.js.map